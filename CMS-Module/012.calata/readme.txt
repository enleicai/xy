逍遥活动日历(2010-7-5 mingelz)


一、三种样式介绍：
1、大月历：展示所有表格，活动图标列在单元格中，活动图标带有对应的活动链接。鼠标放到活动图标上时，有一个浮动层显示活动详细信息。
2、小月历：展示所有表格，单元格中只有日期数字，当点击某个带有活动的单元格时，浮动层显示，当天活动在浮动层中列出，每个活动标题带有对应的活动链接。在浮动层上有关闭按钮。
3、当日活动列表：无表格，只显示当前日期的活动图标列表，样式及功能同大月历单一单元格。


二、代码及调用说明：
1、calendar - source.html：仅包括HTML结构的纯静态文件，未引入js文件，仅做模拟之用；
   calendar.html：可实现完整日历功能的HTML结构，同时适用于三种日历形式，这也是最终程序输出的代码。
  1)输出的代码不包括css文件。
  1)本应放在thead中的周一~周日表头被单独写在了一个table里，目的是方便控制样式，因为我发现只使用thead和tbody分隔，很多并不复杂的样式却难于实现。
  2)除了静态的已知结构外，通过javascript还会——
	为所有的周六对应的td添加class="saturday"，
	为所有的周日对应的td添加class="sunday"，
	为所有的当前月日期对应的td添加class="thisMonth"，
	为所有的前一月日期对应的td添加class="previousMonth"，
	为所有的后一月日期对应的td添加class="nextMonth"，
	为当天对应的td添加class="today"，
	为没有活动的当前月日期对应的td添加class="nodata"，
	如果数据出错，或在“当日活动列表”中查找到今日无活动，会使用id="calError"的div给出提示。

2、calendar.css：日历的CSS样式范例，为三种日历形式都编写了样式，提供参考。
  1)样式中直接将一部分reset定义写在了具体标签中，此css不依赖CSS Reset。
  2)#calMain ul{display:inline-block;}此定义是为了清除其中的li浮动，省却了使用:after的麻烦，如果它和周围的样式产生冲突，可再做调整。
  3)在table中，th/td无法设置min-height，不过它的height的作用就相当于min-height，如果其中内容多会被自动撑开，这一点在所有浏览器下通用。
  4)尽量不要为th/td设置padding值，因为它们的width计算与正常盒模型有区别，如果一定要设置，可以分别为class="thisMonth"及class="previousMonth"、class="nextMonth"设置不同的值。

3、calendar.js：日历的功能实现代码。
  1)使用 calInit(yyyy,mm,dd,type); 进行调用，4个参数分别是程序输出时的年份、月份、日期、日历输出类型，其中日历输出类型由程序控制（请参考第5点）。

4、caldata.js：日历的JSON数据，此数据仅为模拟而用，程序输出时，会直接写到html中。
  1)其中的year_no = 2010, month_no = 6, day_no = 10, yueli_type = 0分别定义了当前日期和月历输出类型，在本地模拟时可以适当修改查看运行结果，其中——
	yueli_type = 0 代表输出的是小月历，
	yueli_type = 1 代表输出的是大月历，
	yueli_type = 2 代表输出的是当日活动列表。

5、在CMS后台，组件ID为1332的为当日活动列表、组件ID为1333的为大/小月历：
  1)如果希望在页面中加入当日活动列表，插入1332号组件即可；
  2)如果希望在页面中加入大/小大历，则插入1333号组件，程序会根据当前页面自动判断——
	如果当前页面为首页，由输出小月历；
	如果是内容页，则输出大月历。

